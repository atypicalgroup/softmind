<div class="validate container py-5 d-flex flex-column align-items-center">

  <h2 class="mb-3">Validar Código</h2>
  <p class="text-muted mb-4 text-center">
    Digite o código de 6 dígitos enviado para o seu e-mail.
  </p>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="code-form">
    <div class="d-flex gap-2 mb-4 justify-content-center">
      <input *ngFor="let i of [1,2,3,4,5,6]; let idx = index"
             #codeInput
             type="text"
             maxlength="1"
             [formControlName]="'d' + i"
             class="form-control code-input text-center"
             autocomplete="off"
             (input)="onInput($event, idx)"
             (keydown.backspace)="onInput($event, idx)" />
    </div>

    <button type="submit" class="btn btn-primary w-100" [disabled]="loading">
      <span *ngIf="!loading">Validar Código</span>
      <span *ngIf="loading"><i class="bi bi-arrow-repeat spin me-2"></i> Validando...</span>
    </button>
  </form>

  <div *ngIf="message" class="alert alert-success text-center mt-3 fade-in">
    {{ message }}
  </div>

  <div *ngIf="error" class="alert alert-danger text-center mt-3 fade-in">
    {{ error }}
  </div>

  <p class="mt-4 small text-center">
    Não recebeu o código? <a routerLink="/recuperar-senha">Reenviar</a>
  </p>
</div>
